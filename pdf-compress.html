<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>PDF Compressor</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>

<style>

body{
font-family:Arial;
background:linear-gradient(135deg,#5f9cff,#3ad0d6);
display:flex;
justify-content:center;
align-items:center;
height:100vh;
margin:0;
}

.container{
background:white;
padding:25px;
border-radius:12px;
width:90%;
max-width:500px;
text-align:center;
box-shadow:0 10px 25px rgba(0,0,0,0.2);
}

input,select{
width:90%;
padding:12px;
margin:10px 0;
border-radius:8px;
border:1px solid #ccc;
}

button{
padding:12px;
width:95%;
border:none;
border-radius:8px;
font-size:16px;
cursor:pointer;
margin-top:10px;
}

.compress{
background:#ff5a3c;
color:white;
}

.download{
background:#2f6edb;
color:white;
display:none;
}

.info{
margin-top:10px;
}

</style>
</head>

<body>

<div class="container">

<h2>ðŸ“¦ PDF Compressor</h2>

<input type="file" id="pdfFile" accept="application/pdf">

<input type="number" id="quality" placeholder="Compression Quality (10 - 90)">

<button class="compress" onclick="compressPDF()">Compress PDF</button>

<button class="download" id="downloadBtn">Download PDF</button>

<div class="info" id="info"></div>

</div>

<script>

let compressedBlob;

function formatSize(bytes){

if(bytes>1048576){
return (bytes/1048576).toFixed(2)+" MB";
}

return (bytes/1024).toFixed(2)+" KB";

}

async function compressPDF(){

const file=document.getElementById("pdfFile").files[0];

if(!file){
alert("Upload PDF first");
return;
}

const originalSize=formatSize(file.size);

const arrayBuffer=await file.arrayBuffer();

const pdfDoc=await PDFLib.PDFDocument.load(arrayBuffer);

const newPdf=await PDFLib.PDFDocument.create();

const pages=await newPdf.copyPages(pdfDoc,pdfDoc.getPageIndices());

pages.forEach(page=>newPdf.addPage(page));

const pdfBytes=await newPdf.save({useObjectStreams:true});

compressedBlob=new Blob([pdfBytes],{type:"application/pdf"});

const newSize=formatSize(compressedBlob.size);

document.getElementById("info").innerHTML=
"Original Size: "+originalSize+"<br>Compressed Size: "+newSize;

document.getElementById("downloadBtn").style.display="block";

}

document.getElementById("downloadBtn").onclick=function(){

const url=URL.createObjectURL(compressedBlob);

const a=document.createElement("a");

a.href=url;

a.download="compressed.pdf";

a.click();

}

</script>

</body>
</html>
