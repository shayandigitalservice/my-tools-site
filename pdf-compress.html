<!DOCTYPE html>
<html>
<head>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>PDF Compressor</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>

body{
font-family:Arial;
background:linear-gradient(135deg,#4facfe,#00f2fe);
margin:0;
padding:20px;
display:flex;
justify-content:center;
}

.container{
background:white;
padding:25px;
border-radius:12px;
max-width:500px;
width:100%;
box-shadow:0 10px 25px rgba(0,0,0,0.2);
text-align:center;
}

.drop{
border:2px dashed #999;
padding:30px;
border-radius:10px;
margin-bottom:15px;
}

input,select{
width:100%;
padding:12px;
margin-top:10px;
border-radius:8px;
border:1px solid #ccc;
font-size:16px;
}

button{
width:100%;
padding:14px;
margin-top:15px;
border:none;
border-radius:10px;
font-size:16px;
cursor:pointer;
}

.compress{
background:#ff5a3c;
color:white;
}

.download{
background:#2f6edb;
color:white;
display:none;
}

.info{
margin-top:15px;
font-size:16px;
}

</style>

</head>

<body>

<div class="container">

<h2>ðŸ“¦ PDF Compressor</h2>

<div class="drop">

<input type="file" id="pdfFile" accept="application/pdf">

</div>

<input type="number" id="sizeInput" placeholder="Enter size (example 200)">

<select id="unit">
<option value="kb">KB</option>
<option value="mb">MB</option>
</select>

<button class="compress" onclick="compressPDF()">Compress PDF</button>

<button class="download" id="downloadBtn">Download PDF</button>

<div class="info" id="info"></div>

</div>

<script>

let compressedBlob;

function formatSize(bytes){

if(bytes > 1048576){
return (bytes/1048576).toFixed(2) + " MB";
}

return (bytes/1024).toFixed(2) + " KB";

}

async function compressPDF(){

const file = document.getElementById("pdfFile").files[0];

if(!file){

alert("Upload PDF first");

return;

}

const originalSize = formatSize(file.size);

const fileReader = new FileReader();

fileReader.onload = async function(){

const typedarray = new Uint8Array(this.result);

const pdf = await pdfjsLib.getDocument(typedarray).promise;

const { jsPDF } = window.jspdf;

const newPdf = new jsPDF();

for(let i=1;i<=pdf.numPages;i++){

const page = await pdf.getPage(i);

const viewport = page.getViewport({scale:1});

const canvas = document.createElement("canvas");

const context = canvas.getContext("2d");

canvas.height = viewport.height;

canvas.width = viewport.width;

await page.render({canvasContext:context,viewport:viewport}).promise;

const img = canvas.toDataURL("image/jpeg",0.6);

if(i>1)newPdf.addPage();

newPdf.addImage(img,'JPEG',0,0,210,297);

}

const pdfBlob = newPdf.output("blob");

compressedBlob = pdfBlob;

const newSize = formatSize(pdfBlob.size);

document.getElementById("info").innerHTML =
"Original Size: "+originalSize+"<br>Compressed Size: "+newSize;

document.getElementById("downloadBtn").style.display="block";

};

fileReader.readAsArrayBuffer(file);

}

document.getElementById("downloadBtn").onclick=function(){

const url = URL.createObjectURL(compressedBlob);

const a = document.createElement("a");

a.href = url;

a.download = "compressed.pdf";

a.click();

}

</script>

</body>
</html>
